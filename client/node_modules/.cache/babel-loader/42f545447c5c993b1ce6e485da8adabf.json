{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Draggable, guid, classNames, focusFirstFocusableChild, getTabIndex, createPropsContext, withPropsContext } from '@progress/kendo-react-common';\nimport { validatePackage } from '@progress/kendo-react-common';\nimport { packageMetadata } from '../package-metadata';\nimport { Slider } from './../main';\nimport { fitIntoBounds, isPresent } from './utils/misc';\nimport { getColorFromHue, parseColor, getHSV, getColorFromHSV, getRGBA, getColorFromRGBA } from './utils/color-parser';\nimport { cacheHsva, removeCachedColor, getCachedHsva, getCachedRgba, getCachedHex, cacheRgba, cacheHex } from './utils/color-cache';\nimport ColorInput from './ColorInput';\nimport { ColorContrastLabels } from './ColorContrastLabels';\nimport { ColorContrastSvg } from './ColorContrastSvg';\nimport { provideLocalizationService } from '@progress/kendo-react-intl';\nimport { messages, colorGradientHueSliderLabel, colorGradientAlphaSliderLabel } from './../messages';\nvar FORMAT = 'rgba';\nvar DEFAULT_SELECTED_COLOR = 'rgba(255, 255, 255, 1)';\n/** @hidden */\nvar ColorGradientWithoutContext = /** @class */function (_super) {\n  __extends(ColorGradientWithoutContext, _super);\n  function ColorGradientWithoutContext(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n    _this.wrapper = null;\n    /**\n     * @hidden\n     */\n    _this.onHexChange = function (hex, value, event) {\n      if (_this.isUncontrolled) {\n        var hsva = getHSV(value);\n        _this.setState({\n          hsva: hsva,\n          backgroundColor: getColorFromHue(hsva.h),\n          rgba: getRGBA(value),\n          hex: hex\n        });\n      } else {\n        cacheHex(_this.state.guid, value, hex);\n      }\n      _this.dispatchChangeEvent(value, event, event.nativeEvent);\n    };\n    /**\n     * @hidden\n     */\n    _this.onRgbaChange = function (rgba, event) {\n      var value = getColorFromRGBA(rgba);\n      if (_this.isUncontrolled) {\n        var hsva = getHSV(value);\n        var hex = parseColor(value, 'hex');\n        _this.setState({\n          hsva: hsva,\n          backgroundColor: getColorFromHue(hsva.h),\n          rgba: rgba,\n          hex: hex\n        });\n      } else {\n        cacheRgba(_this.state.guid, value, rgba);\n      }\n      _this.dispatchChangeEvent(value, event.syntheticEvent, event.nativeEvent);\n    };\n    /**\n     * @hidden\n     */\n    _this.onAlphaSliderChange = function (event) {\n      _this.handleHsvaChange(Object.assign({}, _this.state.hsva, {\n        a: event.value / 100\n      }), event.syntheticEvent, event.nativeEvent);\n    };\n    /**\n     * @hidden\n     */\n    _this.onHueSliderChange = function (event) {\n      _this.handleHsvaChange(Object.assign({}, _this.state.hsva, {\n        h: event.value\n      }), event.syntheticEvent, event.nativeEvent);\n    };\n    /**\n     * @hidden\n     */\n    _this.onDrag = function (e) {\n      _this.gradientWrapper.classList.add('k-dragging');\n      _this.changePosition(e.event);\n    };\n    /**\n     * @hidden\n     */\n    _this.onRelease = function () {\n      _this.gradientWrapper.classList.remove('k-dragging');\n    };\n    /**\n     * @hidden\n     */\n    _this.onGradientWrapperClick = function (event) {\n      _this.changePosition(event);\n    };\n    /**\n     * @hidden\n     */\n    _this.changePosition = function (event) {\n      var gradientRectMetrics = _this.getGradientRectMetrics();\n      var deltaX = event.clientX - gradientRectMetrics.left;\n      var deltaY = event.clientY - gradientRectMetrics.top;\n      var left = fitIntoBounds(deltaX, 0, gradientRectMetrics.width);\n      var top = fitIntoBounds(deltaY, 0, gradientRectMetrics.height);\n      var hsva = Object.assign({}, _this.state.hsva, {\n        s: left / gradientRectMetrics.width,\n        v: 1 - top / gradientRectMetrics.height\n      });\n      _this.handleHsvaChange(hsva, event, event.nativeEvent);\n    };\n    /**\n     * @hidden\n     */\n    _this.onFocus = function (nativeEvent) {\n      if (_this.props.onFocus) {\n        _this.props.onFocus.call(undefined, {\n          nativeEvent: nativeEvent,\n          target: _this\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n    _this.focus = function () {\n      focusFirstFocusableChild(_this.wrapper);\n    };\n    validatePackage(packageMetadata);\n    var value = props.value || props.defaultValue || parseColor(DEFAULT_SELECTED_COLOR, FORMAT);\n    _this.state = Object.assign({}, ColorGradientWithoutContext.getStateFromValue(value), {\n      isFirstRender: true,\n      guid: guid()\n    });\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.getDerivedStateFromProps = function (props, state) {\n    if (props.value && !state.isFirstRender) {\n      // The component is in controlled mode.\n      return ColorGradientWithoutContext.getStateFromValue(props.value, state.guid);\n    }\n    return null;\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.componentDidMount = function () {\n    this.setAlphaSliderBackground(this.state.backgroundColor);\n    if (this.state.isFirstRender) {\n      this.setState({\n        isFirstRender: false\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.componentWillUnmount = function () {\n    removeCachedColor(this.state.guid);\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.componentDidUpdate = function (_, prevState) {\n    if (prevState.backgroundColor !== this.state.backgroundColor) {\n      this.setAlphaSliderBackground(this.state.backgroundColor);\n    }\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.renderRectangleDragHandle = function () {\n    var style = {};\n    if (!this.state.isFirstRender) {\n      var gradientRectMetrics = this.getGradientRectMetrics();\n      var top_1 = (1 - this.state.hsva.v) * gradientRectMetrics.height;\n      var left = this.state.hsva.s * gradientRectMetrics.width;\n      style.top = \"\".concat(top_1, \"px\");\n      style.left = \"\".concat(left, \"px\");\n    }\n    return React.createElement(\"div\", {\n      className: \"k-hsv-draghandle k-draghandle\",\n      style: style\n    });\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.handleHsvaChange = function (hsva, syntheticEvent, nativeEvent) {\n    var value = getColorFromHSV(hsva);\n    if (this.isUncontrolled) {\n      var hex = parseColor(value, 'hex');\n      this.setState({\n        hsva: hsva,\n        backgroundColor: getColorFromHue(hsva.h),\n        rgba: getRGBA(value),\n        hex: hex\n      });\n    } else {\n      cacheHsva(this.state.guid, value, hsva);\n    }\n    this.dispatchChangeEvent(value, syntheticEvent, nativeEvent);\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.dispatchChangeEvent = function (value, syntheticEvent, nativeEvent) {\n    if (this.props.onChange) {\n      this.props.onChange.call(undefined, {\n        syntheticEvent: syntheticEvent,\n        nativeEvent: nativeEvent,\n        target: this,\n        value: value\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.getStateFromValue = function (value, componentGuid) {\n    if (!isPresent(parseColor(value, 'hex'))) {\n      // Validate/sanitize the input.\n      value = DEFAULT_SELECTED_COLOR;\n    }\n    var hsva = getCachedHsva(componentGuid, value) || getHSV(value);\n    var rgba = getCachedRgba(componentGuid, value) || getRGBA(value);\n    var hex = getCachedHex(componentGuid, value) || parseColor(value, 'hex');\n    var backgroundColor = getColorFromHue(hsva.h);\n    return {\n      hsva: hsva,\n      backgroundColor: backgroundColor,\n      rgba: rgba,\n      hex: hex\n    };\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.setAlphaSliderBackground = function (backgroundColor) {\n    if (this.props.opacity && this.alphaSlider && this.alphaSlider.sliderTrack) {\n      this.alphaSlider.sliderTrack.style.background = \"linear-gradient(to top, transparent, \".concat(backgroundColor, \")\");\n    }\n  };\n  Object.defineProperty(ColorGradientWithoutContext.prototype, \"isUncontrolled\", {\n    /**\n     * @hidden\n     */\n    get: function get() {\n      return this.props.value === undefined;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.getGradientRectMetrics = function () {\n    return this.gradientWrapper.getBoundingClientRect();\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.prototype.render = function () {\n    var _this = this;\n    var lS = provideLocalizationService(this);\n    var className = classNames('k-colorgradient', {\n      'k-disabled': this.props.disabled\n    });\n    return React.createElement(\"div\", {\n      id: this.props.id,\n      className: className,\n      \"aria-disabled\": this.props.disabled ? 'true' : undefined,\n      style: this.props.style,\n      ref: function ref(el) {\n        return _this.wrapper = el;\n      },\n      tabIndex: getTabIndex(this.props.tabIndex, this.props.disabled),\n      \"aria-labelledby\": this.props.ariaLabelledBy,\n      \"aria-describedby\": this.props.ariaDescribedBy,\n      onFocus: this.onFocus\n    }, React.createElement(\"div\", {\n      className: \"k-colorgradient-canvas k-hstack\"\n    }, React.createElement(\"div\", {\n      className: \"k-hsv-rectangle\",\n      style: {\n        background: this.state.backgroundColor\n      }\n    }, React.createElement(Draggable, {\n      onDrag: this.onDrag,\n      onRelease: this.onRelease,\n      ref: function ref(el) {\n        return _this.gradientWrapper = el ? el.element : undefined;\n      }\n    }, React.createElement(\"div\", {\n      className: \"k-hsv-gradient\",\n      style: {\n        touchAction: 'none'\n      },\n      onClick: this.onGradientWrapperClick\n    }, this.renderRectangleDragHandle())), this.props.backgroundColor && !this.state.isFirstRender && React.createElement(ColorContrastSvg, {\n      metrics: this.gradientWrapper ? this.getGradientRectMetrics() : undefined,\n      hsva: this.state.hsva,\n      backgroundColor: this.props.backgroundColor\n    })), React.createElement(\"div\", {\n      className: \"k-hsv-controls k-hstack\"\n    }, React.createElement(Slider, {\n      value: this.state.hsva.h,\n      buttons: false,\n      vertical: true,\n      min: 0,\n      max: 360,\n      step: 5,\n      onChange: this.onHueSliderChange,\n      className: \"k-hue-slider k-colorgradient-slider\",\n      disabled: this.props.disabled,\n      ariaLabel: lS.toLanguageString(colorGradientHueSliderLabel, messages[colorGradientHueSliderLabel])\n    }), this.props.opacity && React.createElement(Slider, {\n      value: isPresent(this.state.hsva.a) ? this.state.hsva.a * 100 : 100,\n      buttons: false,\n      vertical: true,\n      min: 0,\n      max: 100,\n      step: 1,\n      ariaLabel: lS.toLanguageString(colorGradientAlphaSliderLabel, messages[colorGradientAlphaSliderLabel]),\n      onChange: this.onAlphaSliderChange,\n      className: \"k-alpha-slider k-colorgradient-slider\",\n      disabled: this.props.disabled,\n      ref: function ref(el) {\n        return _this.alphaSlider = el;\n      }\n    }))), React.createElement(ColorInput, {\n      rgba: this.state.rgba,\n      onRgbaChange: this.onRgbaChange,\n      hex: this.state.hex,\n      onHexChange: this.onHexChange,\n      opacity: this.props.opacity,\n      disabled: this.props.disabled\n    }), this.props.backgroundColor && React.createElement(ColorContrastLabels, {\n      bgColor: getRGBA(this.props.backgroundColor),\n      rgba: this.state.rgba\n    }));\n  };\n  ColorGradientWithoutContext.displayName = 'ColorGradient';\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.propTypes = {\n    defaultValue: PropTypes.string,\n    value: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    opacity: PropTypes.bool,\n    backgroundColor: PropTypes.string,\n    disabled: PropTypes.bool,\n    style: PropTypes.any,\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string\n  };\n  /**\n   * @hidden\n   */\n  ColorGradientWithoutContext.defaultProps = {\n    opacity: true\n  };\n  return ColorGradientWithoutContext;\n}(React.Component);\nexport { ColorGradientWithoutContext };\n/**\n * Represents the PropsContext of the `ColorGradient` component.\n * Used for global configuration of all `ColorGradient` instances.\n *\n * For more information, refer to the [Inputs Props Context]({% slug props-context_inputs %}) article.\n */\nexport var ColorGradientPropsContext = createPropsContext();\n/* eslint-disable @typescript-eslint/no-redeclare -- intentionally naming the component the same as the type */\n/**\n * Represents the [KendoReact ColorGradient component]({% slug overview_colorgradient %}).\n *\n * Accepts properties of type [ColorGradientProps]({% slug api_inputs_colorgradientprops %}).\n * Obtaining the `ref` returns an object of type [ColorGradientHandle]({% slug api_inputs_colorgradienthandle %}).\n *\n * @example\n * ```jsx\n * class App extends React.Component {\n *     render() {\n *         return <ColorGradient />;\n *     }\n * }\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\nexport var ColorGradient = withPropsContext(ColorGradientPropsContext, ColorGradientWithoutContext);\nColorGradient.displayName = 'KendoReactColorGradient';","map":null,"metadata":{},"sourceType":"module"}